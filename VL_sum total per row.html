<script>
  $(document).ready(function() {
    $('input').change(function() {
      var classParent = $(this)
        .parent()
        .attr('class');
      var total = 0;
      //console.log("current element: "+classParent);
      if (classParent != null) {
        try {
          var rowsCell = document.getElementsByClassName(classParent);
          for (var i = 0; i < rowsCell.length; i++) {
            var currentValue = parseInt(rowsCell[i].childNodes.item(0).value);
            if (!isNaN(currentValue)) {
              total += currentValue;
            }
          }
          document.getElementById('total_' + classParent).innerHTML = total;
        } catch (ex) {
          console.log('Error: ' + ex);
        }
      }
    });
    //function to compute total during first page load
    $('#charge_virale tbody tr td input').each(function() {
      var classParent = $(this)
        .parent()
        .attr('class');
      if (classParent != null) {
        console.log('parent: ' + classParent);
        if (classParent.includes('row')) {
          var total = 0;
          console.log('this parent include row');
          try {
            var rowsCell = document.getElementsByClassName(classParent);
            //console.log(rowsCell);

            for (var i = 0; i < rowsCell.length; i++) {
              var currentValue = parseInt(rowsCell[i].childNodes.item(0).value);
              console.log(
                'current value :' + rowsCell[i].childNodes.item(0).value
              );
              if (!isNaN(currentValue)) {
                total += currentValue;
              }
            }
            document.getElementById('total_' + classParent).innerHTML = total;
          } catch (ex) {
            console.log('Error: ' + ex);
          }
        }
      }
    }); //End of indexTesting.each
    $('#buttonTotal').click(function() {
      $('#charge_virale tbody tr td input').each(function() {
        var classParent = $(this)
          .parent()
          .attr('class');
        if (classParent != null) {
          console.log('parent: ' + classParent);
          if (classParent.includes('row')) {
            var total = 0;
            console.log('this parent include row');
            try {
              var rowsCell = document.getElementsByClassName(classParent);
              //console.log(rowsCell);

              for (var i = 0; i < rowsCell.length; i++) {
                var currentValue = parseInt(
                  rowsCell[i].childNodes.item(0).value
                );
                console.log(
                  'current value :' + rowsCell[i].childNodes.item(0).value
                );
                if (!isNaN(currentValue)) {
                  total += currentValue;
                }
              }
              document.getElementById('total_' + classParent).innerHTML = total;
            } catch (ex) {
              console.log('Error: ' + ex);
            }
          }
        }
      }); //end of IndexTesting.each function
    }); //end of button click
  }); //end of ready
</script>
<table
  border="1"
  cellpadding="1"
  cellspacing="1"
  id="charge_virale"
  style="width:500px;"
>
  <caption>
    <strong>Charge virale</strong>
  </caption>
  <tbody>
    <tr>
      <td>&nbsp;</td>
      <td>PS</td>
      <td>MSM</td>
      <td>CPS</td>
      <td>Autres</td>
      <td>Total</td>
    </tr>
    <tr>
      <td>Nombre de cas &eacute;ligible pour la charge virale</td>
      <td class="row1">
        <input
          id="rIfspCo8Z99-izqhTByLR6A-val"
          name="entryfield"
          title="CV_Nombre de cas éligible pour la charge virale FSW"
          value="[ CV_Nombre de cas éligible pour la charge virale FSW ]"
        />
      </td>
      <td class="row1">
        <input
          id="rIfspCo8Z99-pPDb6Kps8Ua-val"
          name="entryfield"
          title="CV_Nombre de cas éligible pour la charge virale MSM"
          value="[ CV_Nombre de cas éligible pour la charge virale MSM ]"
        />
      </td>
      <td class="row1">
        <input
          id="rIfspCo8Z99-fl9cyAVLI7h-val"
          name="entryfield"
          title="CV_Nombre de cas éligible pour la charge virale CPS"
          value="[ CV_Nombre de cas éligible pour la charge virale CPS ]"
        />
      </td>
      <td class="row1">
        <input
          id="rIfspCo8Z99-YbOSwdtseuV-val"
          name="entryfield"
          title="CV_Nombre de cas éligible pour la charge virale Autres"
          value="[ CV_Nombre de cas éligible pour la charge virale Autres ]"
        />
      </td>
      <td id="total_row1">&nbsp;</td>
    </tr>
    <tr>
      <td style="white-space: nowrap;">
        Nombre de cas dont le pr&eacute;l&egrave;vement a &eacute;t&eacute;
        r&eacute;alis&eacute;&nbsp;
      </td>
      <td class="row2">
        <input
          id="RgHLvEoAOgb-izqhTByLR6A-val"
          name="entryfield"
          title="CV_Nombre de cas dont le prélèvement a été réalisé  FSW"
          value="[ CV_Nombre de cas dont le prélèvement a été réalisé  FSW ]"
        />
      </td>
      <td class="row2">
        <input
          id="RgHLvEoAOgb-pPDb6Kps8Ua-val"
          name="entryfield"
          title="CV_Nombre de cas dont le prélèvement a été réalisé  MSM"
          value="[ CV_Nombre de cas dont le prélèvement a été réalisé  MSM ]"
        />
      </td>
      <td class="row2">
        <input
          id="RgHLvEoAOgb-fl9cyAVLI7h-val"
          name="entryfield"
          title="CV_Nombre de cas dont le prélèvement a été réalisé  CPS"
          value="[ CV_Nombre de cas dont le prélèvement a été réalisé  CPS ]"
        />
      </td>
      <td class="row2">
        <input
          id="RgHLvEoAOgb-YbOSwdtseuV-val"
          name="entryfield"
          title="CV_Nombre de cas dont le prélèvement a été réalisé  Autres"
          value="[ CV_Nombre de cas dont le prélèvement a été réalisé  Autres ]"
        />
      </td>
      <td id="total_row2">&nbsp;</td>
    </tr>
    <tr>
      <td>Nombre de cas dont les r&eacute;sultats sont disponibles</td>
      <td class="row3">
        <input
          id="i9UWMnir1de-izqhTByLR6A-val"
          name="entryfield"
          title="CV_Nombre de cas dont les résultats sont disponibles FSW"
          value="[ CV_Nombre de cas dont les résultats sont disponibles FSW ]"
        />
      </td>
      <td class="row3">
        <input
          id="i9UWMnir1de-pPDb6Kps8Ua-val"
          name="entryfield"
          title="CV_Nombre de cas dont les résultats sont disponibles MSM"
          value="[ CV_Nombre de cas dont les résultats sont disponibles MSM ]"
        />
      </td>
      <td class="row3">
        <input
          id="i9UWMnir1de-fl9cyAVLI7h-val"
          name="entryfield"
          title="CV_Nombre de cas dont les résultats sont disponibles CPS"
          value="[ CV_Nombre de cas dont les résultats sont disponibles CPS ]"
        />
      </td>
      <td class="row3">
        <input
          id="i9UWMnir1de-YbOSwdtseuV-val"
          name="entryfield"
          title="CV_Nombre de cas dont les résultats sont disponibles Autres"
          value="[ CV_Nombre de cas dont les résultats sont disponibles Autres ]"
        />
      </td>
      <td id="total_row3">&nbsp;</td>
    </tr>
    <tr>
      <td>Nombre de cas avec suppression de la charge virale</td>
      <td class="row4">
        <input
          id="BWm9xBfNhWG-izqhTByLR6A-val"
          name="entryfield"
          title="CV_Nombre de cas avec suppression de la charge virale FSW"
          value="[ CV_Nombre de cas avec suppression de la charge virale FSW ]"
        />
      </td>
      <td class="row4">
        <input
          id="BWm9xBfNhWG-pPDb6Kps8Ua-val"
          name="entryfield"
          title="CV_Nombre de cas avec suppression de la charge virale MSM"
          value="[ CV_Nombre de cas avec suppression de la charge virale MSM ]"
        />
      </td>
      <td class="row4">
        <input
          id="BWm9xBfNhWG-fl9cyAVLI7h-val"
          name="entryfield"
          title="CV_Nombre de cas avec suppression de la charge virale CPS"
          value="[ CV_Nombre de cas avec suppression de la charge virale CPS ]"
        />
      </td>
      <td id="row4">
        <input
          id="BWm9xBfNhWG-YbOSwdtseuV-val"
          name="entryfield"
          title="CV_Nombre de cas avec suppression de la charge virale Autres"
          value="[ CV_Nombre de cas avec suppression de la charge virale Autres ]"
        />
      </td>
      <td id="total_row4">&nbsp;</td>
    </tr>
    <tr>
      <td colspan="4" rowspan="1">&nbsp;</td>
      <td colspan="2" rowspan="1">
        <button id="buttonTotal" style="float:right">
          Afficher les totaux
        </button>
      </td>
    </tr>
  </tbody>
</table>

<p>&nbsp;</p>
